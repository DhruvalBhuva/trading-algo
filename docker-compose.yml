version: "3.9"

services:
  trading-bot:
    # --------------------------------------------------
    # Fixed container name for easy management
    # --------------------------------------------------
    container_name: trading_bot

    # --------------------------------------------------
    # Docker image pulled from Docker Hub
    # Built & pushed by GitHub Actions CI/CD
    # --------------------------------------------------
    image: dhruvabhuva/trading-algo:latest

    # --------------------------------------------------
    # Always pull newest image when starting
    # --------------------------------------------------
    pull_policy: always

    # --------------------------------------------------
    # Restart automatically unless manually stopped
    # (Ideal for trading bots & VPS reboots)
    # --------------------------------------------------
    restart: no

    # --------------------------------------------------
    # Load secrets & config from server-only .env file
    # (Never commit .env to GitHub)
    # --------------------------------------------------
    env_file:
      - .env

    # --------------------------------------------------
    # Persist important runtime data & logs
    # --------------------------------------------------
    volumes:
      - ./data:/app/data
      - ./logs:/app/logs

    # --------------------------------------------------
    # Prevent Docker logs from filling disk
    # --------------------------------------------------
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "5"
